# IssueLab è·¨ä»“åº“è§¦å‘æž¶æž„

## ðŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

é€šè¿‡ **GitHub Repository Dispatch** å®žçŽ°è·¨ä»“åº“æ™ºèƒ½ä½“è§¦å‘æœºåˆ¶ï¼Œè®©ç”¨æˆ·å¯ä»¥ï¼š
- âœ… åœ¨ä¸»ä»“åº“è¢« @mention æ—¶è§¦å‘è‡ªå·±çš„æ™ºèƒ½ä½“
- âœ… ä½¿ç”¨è‡ªå·±çš„ API Key å’Œ Actions é…é¢
- âœ… å®Œå…¨æŽ§åˆ¶è‡ªå·±çš„æ™ºèƒ½ä½“é…ç½®
- âœ… è´¹ç”¨å’Œèµ„æºç‹¬ç«‹

## ðŸ—ï¸ æž¶æž„è®¾è®¡

### è®¤è¯æž¶æž„

**GitHub App åŠ¨æ€ Token ç”Ÿæˆ**

IssueLab ä½¿ç”¨åˆ›æ–°çš„åŠ¨æ€ Token ç”Ÿæˆç­–ç•¥ï¼Œæ”¯æŒå¤šç”¨æˆ· fork ä»“åº“ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Main Workflow  â”‚
â”‚ (gqy20/IssueLab)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ APP_ID + PRIVATE_KEY
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  dispatch.py    â”‚
â”‚                 â”‚
â”‚  1. Parse @mentions: [gqy22, gqy99, ...]
â”‚  2. For each user:
â”‚     â”œâ”€ Generate JWT
â”‚     â”œâ”€ Get Installation ID
â”‚     â””â”€ Generate Installation Token
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Parallel dispatch with user-specific tokens
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”
â”‚gqy22â”‚  â”‚gqy99â”‚  â”‚ ... â”‚
â”‚ /@  â”‚  â”‚ /@  â”‚  â”‚ /@  â”‚
â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜
 Fork    Fork     Fork
```

**å…³é”®ä¼˜åŠ¿ï¼š**
- æ¯ä¸ª fork ä½¿ç”¨ç‹¬ç«‹çš„ Installation Tokenï¼ˆæƒé™éš”ç¦»ï¼‰
- æ— éœ€é¢„å…ˆçŸ¥é“æ‰€æœ‰ç”¨æˆ·åï¼ˆåŠ¨æ€å‘çŽ°ï¼‰
- è‡ªåŠ¨é€‚é…æ–°ç”¨æˆ·ï¼ˆåªéœ€å®‰è£… Appï¼‰
- ç¬¦åˆ GitHub å®‰å…¨æœ€ä½³å®žè·µï¼ˆæœ€å°æƒé™åŽŸåˆ™ï¼‰

### æ ¸å¿ƒç»„ä»¶

```
IssueLab/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ _registry/              # ðŸ”‘ æ³¨å†Œä¸­å¿ƒï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â”œâ”€â”€ gqy20.yml          # å®˜æ–¹æ™ºèƒ½ä½“æ³¨å†Œ
â”‚   â”‚   â””â”€â”€ alice.yml          # ç”¨æˆ·æ™ºèƒ½ä½“æ³¨å†Œï¼ˆé€šè¿‡ PR æ·»åŠ ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ _template/             # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ agent.yml
â”‚   â”‚   â””â”€â”€ prompt.md
â”‚   â”‚
â”‚   â””â”€â”€ gqy20/                 # å®˜æ–¹æ™ºèƒ½ä½“é…ç½®
â”‚       â”œâ”€â”€ agent.yml
â”‚       â””â”€â”€ prompt.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ parse_mentions.py      # è§£æž @mentions
â”‚   â””â”€â”€ dispatch_to_users.py   # åˆ†å‘äº‹ä»¶åˆ°ç”¨æˆ·ä»“åº“
â”‚
â””â”€â”€ .github/workflows/
    â”œâ”€â”€ dispatch_agents.yml    # ä¸»ä»“åº“ï¼šåˆ†å‘å™¨
    â””â”€â”€ user_agent.yml         # ç”¨æˆ· forkï¼šæŽ¥æ”¶å¹¶æ‰§è¡Œ
```

### æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ä¸»ä»“åº“ Issue: "@alice å¸®æˆ‘åˆ†æžè¿™ä¸ªè®ºæ–‡"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ä¸»ä»“åº“ Actions è§¦å‘                                       â”‚
â”‚    Workflow: dispatch_agents.yml                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è§£æž @mentions                                            â”‚
â”‚    Script: parse_mentions.py                                â”‚
â”‚    Result: ["alice"]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¯»å–æ³¨å†Œä¿¡æ¯                                              â”‚
â”‚    File: agents/_registry/alice.yml                         â”‚
â”‚    {                                                        â”‚
â”‚      username: alice,                                       â”‚
â”‚      repository: alice/IssueLab,                            â”‚
â”‚      triggers: ["@alice"]                                   â”‚
â”‚    }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å‘é€ repository_dispatch                                  â”‚
â”‚    Script: dispatch_to_users.py                             â”‚
â”‚    Target: alice/IssueLab                                   â”‚
â”‚    Event: issue_mention                                     â”‚
â”‚    Payload: {                                               â”‚
â”‚      source_repo: "gqy20/IssueLab",                         â”‚
â”‚      issue_number: 42,                                      â”‚
â”‚      issue_title: "...",                                    â”‚
â”‚      issue_body: "..."                                      â”‚
â”‚    }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ (è·¨ä»“åº“)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Alice fork æŽ¥æ”¶äº‹ä»¶                                       â”‚
â”‚    Repository: alice/IssueLab                               â”‚
â”‚    Workflow: user_agent.yml                                 â”‚
â”‚    Trigger: repository_dispatch                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. è¯»å–æ™ºèƒ½ä½“é…ç½®                                            â”‚
â”‚    File: agents/alice/agent.yml                             â”‚
â”‚    File: agents/alice/prompt.md                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. æ‰§è¡Œæ™ºèƒ½ä½“                                                â”‚
â”‚    Using: Alice's ANTHROPIC_API_KEY                         â”‚
â”‚    Using: Alice's GitHub Actions é…é¢                       â”‚
â”‚    Script: issuelab.sdk_executor                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. å›žä¼ ç»“æžœ                                                  â”‚
â”‚    Target: gqy20/IssueLab Issue #42                         â”‚
â”‚    Method: GitHub API comment                               â”‚
â”‚    Token: Alice's GITHUB_TOKEN                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### 1. æ³¨å†Œæ–‡ä»¶æ ¼å¼

**agents/_registry/alice.yml**
```yaml
# ç”¨æˆ·æ™ºèƒ½ä½“æ³¨å†Œä¿¡æ¯
username: alice                # å¿…éœ€ï¼šGitHub ç”¨æˆ·å
display_name: "Alice Chen"     # å¯é€‰ï¼šæ˜¾ç¤ºåç§°
contact: "alice@cs.edu"        # å¯é€‰ï¼šè”ç³»æ–¹å¼

# Fork ä»“åº“
repository: alice/IssueLab     # å¿…éœ€ï¼šç”¨æˆ·çš„ fork ä»“åº“
branch: main                   # å¯é€‰ï¼šåˆ†æ”¯åï¼ˆé»˜è®¤ mainï¼‰

# è§¦å‘æ¡ä»¶
triggers:                      # å¿…éœ€ï¼šè§¦å‘æ¡ä»¶åˆ—è¡¨
  - "@alice"                   # å¿…é¡»åŒ…å«ç”¨æˆ·å

# çŠ¶æ€
enabled: true                  # å¯é€‰ï¼šæ˜¯å¦å¯ç”¨ï¼ˆé»˜è®¤ trueï¼‰

# æ ‡ç­¾è¿‡æ»¤
labels_filter:                 # å¯é€‰ï¼šåªå“åº”ç‰¹å®šæ ‡ç­¾
  - "domain:cv"
  - "domain:ai"

# é€ŸçŽ‡é™åˆ¶
rate_limit:
  max_calls_per_hour: 10
  max_calls_per_day: 50

# å¤‡æ³¨
description: "Alice çš„è®¡ç®—æœºè§†è§‰ç ”ç©¶è€…æ•°å­—åˆ†èº«"
```

### 2. Repository Dispatch API

**ä¸»ä»“åº“å‘ç”¨æˆ·ä»“åº“å‘é€äº‹ä»¶ï¼š**
```bash
curl -X POST \
  -H "Accept: application/vnd.github+json" \
  -H "Authorization: Bearer $DISPATCH_TOKEN" \
  https://api.github.com/repos/alice/IssueLab/dispatches \
  -d '{
    "event_type": "issue_mention",
    "client_payload": {
      "source_repo": "gqy20/IssueLab",
      "issue_number": 42,
      "issue_title": "è®ºæ–‡è®¨è®º",
      "issue_body": "@alice å¸®æˆ‘åˆ†æž...",
      "comment_id": 123456,
      "labels": ["domain:cv", "paper"]
    }
  }'
```

### 3. ä¸»ä»“åº“ Workflow

**.github/workflows/dispatch_agents.yml**
```yaml
name: Dispatch to User Agents

on:
  issues:
    types: [opened, edited]
  issue_comment:
    types: [created, edited]

jobs:
  dispatch:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      - name: Parse mentions
        id: parse
        run: |
          python scripts/parse_mentions.py \
            --issue-body "${{ github.event.issue.body }}"

      - name: Dispatch to users
        env:
          GITHUB_TOKEN: ${{ secrets.DISPATCH_TOKEN }}
        run: |
          python scripts/dispatch_to_users.py \
            --mentions "${{ steps.parse.outputs.mentions }}" \
            --source-repo "${{ github.repository }}" \
            --issue-number ${{ github.event.issue.number }}
```

### 4. ç”¨æˆ· Fork Workflow

**.github/workflows/user_agent.yml** ï¼ˆåœ¨ç”¨æˆ· fork ä¸­ï¼‰
```yaml
name: Run Agent on Repository Dispatch

on:
  repository_dispatch:
    types: [issue_mention]

jobs:
  run-agent:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5

      - name: Run agent
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          python -m issuelab.sdk_executor \
            --source-repo "${{ github.event.client_payload.source_repo }}" \
            --issue-number ${{ github.event.client_payload.issue_number }}
```

## ðŸ” æƒé™å’Œå®‰å…¨

### ä¸»ä»“åº“éœ€è¦

**DISPATCH_TOKEN**ï¼ˆFine-grained Personal Access Tokenï¼‰
- Permissions:
  - `contents: read` - è¯»å–æ³¨å†Œä¿¡æ¯
  - `metadata: read` - è¯»å–åŸºæœ¬ä¿¡æ¯
  - Repository access: é€‰æ‹©éœ€è¦è§¦å‘çš„ç”¨æˆ·ä»“åº“
  - `actions: write` - è§¦å‘ç”¨æˆ·ä»“åº“çš„ Actions

**åˆ›å»ºæ­¥éª¤ï¼š**
1. GitHub Settings â†’ Developer settings â†’ Personal access tokens â†’ Fine-grained tokens
2. Generate new token
3. Repository access: "All repositories" æˆ–é€‰æ‹©ç‰¹å®šä»“åº“
4. Permissions: å¦‚ä¸Šé…ç½®
5. ä¿å­˜ token åˆ°ä¸»ä»“åº“ Secrets

### ç”¨æˆ· Fork éœ€è¦

**ANTHROPIC_API_KEY**
- ç”¨æˆ·è‡ªå·±çš„ Claude API Key
- åœ¨ fork ä»“åº“çš„ Settings â†’ Secrets ä¸­é…ç½®

**GITHUB_TOKEN**
- GitHub è‡ªåŠ¨æä¾›ï¼Œç”¨äºŽå›žå¤è¯„è®º
- æ— éœ€æ‰‹åŠ¨é…ç½®

### å®‰å…¨è€ƒè™‘

1. **æ³¨å†Œå®¡æ ¸**ï¼š
   - æ‰€æœ‰æ³¨å†Œ PR éœ€è¦ä¸»ä»“åº“ç®¡ç†å‘˜å®¡æ ¸
   - æ£€æŸ¥ç”¨æˆ·ä»“åº“ç¡®å®žæ˜¯ fork
   - éªŒè¯è§¦å‘æ¡ä»¶åˆç†

2. **é€ŸçŽ‡é™åˆ¶**ï¼š
   - åœ¨æ³¨å†Œæ–‡ä»¶ä¸­é…ç½® rate_limit
   - dispatcher è„šæœ¬ä¼šå¼ºåˆ¶æ‰§è¡Œ
   - é˜²æ­¢æ»¥ç”¨

3. **æƒé™æœ€å°åŒ–**ï¼š
   - DISPATCH_TOKEN åªç»™å¿…è¦çš„æƒé™
   - ä¸èƒ½ä¿®æ”¹ä¸»ä»“åº“å†…å®¹
   - ä¸èƒ½è®¿é—®ä¸»ä»“åº“ secrets

4. **API Key éš”ç¦»**ï¼š
   - æ¯ä¸ªç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ ANTHROPIC_API_KEY
   - æ°¸è¿œä¸åœ¨æ³¨å†Œæ–‡ä»¶ä¸­æš´éœ²
   - åªå­˜åœ¨äºŽç”¨æˆ·è‡ªå·±çš„ fork secrets

5. **æ¶æ„ä»£ç é˜²æŠ¤**ï¼š
   - ç”¨æˆ·çš„æ™ºèƒ½ä½“åœ¨è‡ªå·±çš„ Actions ä¸­è¿è¡Œ
   - æ— æ³•å½±å“ä¸»ä»“åº“
   - ç»“æžœé€šè¿‡ GitHub API å›žä¼ ï¼ˆç»è¿‡éªŒè¯ï¼‰

## ðŸ“Š å¯¹æ¯”ï¼šä¸‰ç§æ–¹æ¡ˆ

| ç‰¹æ€§ | PRåˆ°ä¸»ä»“åº“ | Repository Dispatch âœ… | Webhook |
|-----|-----------|----------------------|---------|
| ç”¨æˆ·ç‹¬ç«‹æ€§ | âŒ ä½Ž | âœ… é«˜ | âœ… é«˜ |
| API Key éš”ç¦» | âŒ å¦ | âœ… æ˜¯ | âœ… æ˜¯ |
| Actions é…é¢ | âŒ ä¸»ä»“åº“ | âœ… ç”¨æˆ· | âœ… ç”¨æˆ· |
| å®žçŽ°å¤æ‚åº¦ | âœ… ç®€å• | âš ï¸ ä¸­ç­‰ | âŒ å¤æ‚ |
| ç”¨æˆ·é—¨æ§› | âœ… ä½Ž | âš ï¸ ä¸­ç­‰ | âŒ é«˜ |
| å¯æ‰©å±•æ€§ | âŒ å·® | âœ… å¥½ | âœ… å¥½ |
| ç»´æŠ¤æˆæœ¬ | âŒ é«˜ | âœ… ä½Ž | âŒ é«˜ |
| éœ€è¦æœåŠ¡å™¨ | âŒ å¦ | âŒ å¦ | âœ… æ˜¯ |

## ðŸŽ¯ ç”¨æˆ·ä½“éªŒ

### Alice çš„å®Œæ•´æµç¨‹

1. **Fork ä¸»ä»“åº“**
   ```bash
   # åœ¨ GitHub ä¸Š fork gqy20/IssueLab
   ```

2. **é…ç½®æ™ºèƒ½ä½“**
   ```bash
   cd IssueLab
   mkdir -p agents/alice
   # ç¼–è¾‘ agents/alice/agent.yml å’Œ prompt.md
   ```

3. **è®¾ç½® Secrets**
   - Settings â†’ Secrets â†’ ANTHROPIC_API_KEY

4. **å¯ç”¨ Actions**
   - Settings â†’ Actions â†’ Allow all actions

5. **æ·»åŠ  user_agent.yml**
   ```bash
   cp .github/workflows/user_agent.yml .github/workflows/
   git commit -am "Add user agent workflow"
   git push
   ```

6. **æ³¨å†Œåˆ°ä¸»ç³»ç»Ÿ**
   ```bash
   # åˆ›å»ºæ³¨å†Œæ–‡ä»¶
   cat > agents/_registry/alice.yml <<EOF
   username: alice
   repository: alice/IssueLab
   triggers:
     - "@alice"
   enabled: true
   EOF

   git commit -am "Register alice's agent"
   git push
   # åœ¨ GitHub æäº¤ PR
   ```

7. **PR åˆå¹¶åŽå³å¯ä½¿ç”¨**
   - åœ¨ä¸»ä»“åº“ä»»ä½• Issue ä¸­ @alice
   - Alice fork çš„ Actions è‡ªåŠ¨è§¦å‘
   - ä½¿ç”¨ Alice çš„ API Key
   - ç»“æžœå›žä¼ åˆ°ä¸»ä»“åº“

**é€æ˜Žä½“éªŒï¼š**
- ä¸»ä»“åº“ç”¨æˆ·ï¼šçœ‹èµ·æ¥å’Œ @gqy20 ä¸€æ ·ï¼Œåªæ˜¯ @alice
- Aliceï¼šå®Œå…¨æŽ§åˆ¶ï¼Œç‹¬ç«‹è¿è¡Œï¼Œè´¹ç”¨è‡ªå·±æ‰¿æ‹…

## ðŸš€ å®žæ–½è®¡åˆ’

### Phase 1: åŸºç¡€è®¾æ–½ âœ…

- [x] åˆ›å»º `agents/_registry/` ç›®å½•
- [x] å®žçŽ° `scripts/parse_mentions.py`
- [x] å®žçŽ° `scripts/dispatch_to_users.py`
- [x] åˆ›å»º `dispatch_agents.yml` workflow
- [x] åˆ›å»º `user_agent.yml` workflow æ¨¡æ¿
- [x] ç¼–å†™æ³¨å†Œæ–‡æ¡£

### Phase 2: é›†æˆæµ‹è¯•

- [ ] é…ç½®ä¸»ä»“åº“ DISPATCH_TOKEN
- [ ] æµ‹è¯•è·¨ä»“åº“è§¦å‘
- [ ] éªŒè¯æƒé™å’Œå®‰å…¨
- [ ] æµ‹è¯•é€ŸçŽ‡é™åˆ¶
- [ ] æµ‹è¯•é”™è¯¯å¤„ç†

### Phase 3: ç”¨æˆ·æŽ¥å…¥

- [ ] é‚€è¯·ç¬¬ä¸€æ‰¹æµ‹è¯•ç”¨æˆ·
- [ ] æ”¶é›†åé¦ˆä¼˜åŒ–
- [ ] ç¼–å†™å®Œæ•´æ•™ç¨‹
- [ ] å½•åˆ¶è§†é¢‘æ¼”ç¤º

### Phase 4: æ­£å¼å‘å¸ƒ

- [ ] æ›´æ–°ä¸» README
- [ ] å‘å¸ƒ release notes
- [ ] å¼€æ”¾å…¬å¼€æ³¨å†Œ
- [ ] ç›‘æŽ§å’Œç»´æŠ¤

## ðŸ“– ç›¸å…³æ–‡æ¡£

- [ç”¨æˆ·æ³¨å†ŒæŒ‡å—](../agents/_registry/README.md)
- [æ™ºèƒ½ä½“é…ç½®æ–‡æ¡£](../agents/README.md)
- [æ–¹æ¡ˆè°ƒç ”åˆ†æž](./CROSS_REPO_TRIGGER_ANALYSIS.md)

---

**Architecture Version:** 1.0
**Last Updated:** 2026-02-02
**Status:** âœ… å®žçŽ°å®Œæˆï¼Œå¾…æµ‹è¯•
